<html>

<head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"/>
    <title>DAS Activity Explorer - User Guide</title>
    <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all"/>
</head>
<body>

<h1>DAS Activity Explorer</h1>

<p>The activity monitoring dashboard is used to get the list of the events belongs to an activity and search through it
    results by providing an valid Lucene query.</p>

<p>Let?s consider an example, a transaction is being processed and going through several subsystems and if you want to
    find out the status of the particular transaction such as whether it has completed or at which sub system currently
    it?s being processed, etc can be filtered by sending the events to our WSO2 DAS with same activity ID, and then you
    can search through the events collected from different sub systems.</p>

<p>The activity monitoring dashboard groups all events which belongs to same activity id, and provide you the list of
    activity ids, and then you can drill down the activity id to see what are the actual events that has fired and then
    take your decisions based on the analysis.</p>

<p>Below sample use case takes you over the capabilities of activity monitoring dashboard.</p>

<p>

</p>

<h3>Enabling the stream for activity monitoring</h3>

<p>
    <span> <span style="color: rgb(0,0,0);">If you want to use activity dashboard to search your events, then you need to define the activityId field as the ?FACET? field and enable the indexing for that field as given below.</span> </span>
</p>

<p>
      <span> <span style="color: rgb(0,0,0);">
          <img src="images/add_facet_field.png"/>
       </span> </span>
</p>

<p>Also you can search the activity by field, and if you want to search by any particular fields other than timestamp,
    then you also need to index them appropriately. In below provided example the user is required to search by <code>meta_host</code>,
    <code>meta_http_method</code>, <code>meta_message_type</code>,<code> </code>and <code>operation_name</code>.
    Therefore the user have to enable indexes to those fields.</p>

<p>

    <img src="images/index_info.png"/>
</p>

<h3>Publish events with the activity ID</h3>

<p>
    <span>As we have mentioned above, the event needs to have mandatory ?activityId? field in the correlation data of the event and the field needs to be as JSON string to use it as FACET type. Therefore convert your activityId as JSON string and publish to WSO2 DAS. For example, sample JSON formed activity shown below.</span>
</p>

<h3>Using the activity monitoring dashboard</h3>

<p>If you want to perform the search within any time period, then select the data and time for ?From time? and ?To time?
    respectively. If you don?t select any time duration for the field, then it will search through the full time range.
    But it?s advisable to use this time range, if you have events collected and hence searching through the entire list
    of events will have some processing/memory needs.</p>

<p>
    <img src="images/fromTime.png"/>
</p>

<p>
    <img src="images/toTime.png"/>
</p>

<p> You also can give any Lucene queries to further filter the results from the time range you have given above. You can
    add any number of nested queries, which spans over any number of tables. Below given is the sample query that you
    can search.</p>

<p>
    <img src="images/search.png"/>
</p>

<p>You will get the list of activity ids as below, and when you click on each you will see a first 10 records for the
    activities. If you want, you can click on view more.</p>

<p>
    <img src="images/search_result.png"/>
</p>

<p>
      <span>
        <span style="color: rgb(0,0,0);">Then you can click on any record that you like to view to see the full record content.</span>
      </span>
</p>

<p>
      <span>
        <span style="color: rgb(0,0,0);">
          <img src="images/record_view.png"/>
          <br/>
        </span>
      </span>
</p>
</body>
</html>
